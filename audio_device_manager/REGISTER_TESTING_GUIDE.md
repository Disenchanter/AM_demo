# 注册功能测试指南

## 🧪 测试前准备

### 环境要求
- Flutter开发环境已设置
- 后端API已部署并运行
- 设备/模拟器已连接

### 启动应用
```bash
cd d:\Share_D\Internship\AM_demo\audio_device_manager
flutter run
```

## 📋 测试用例

### ✅ **测试1: UI界面切换**
1. **操作**: 启动应用
2. **预期**: 默认显示登录界面，标题为"登录"
3. **操作**: 点击底部"立即注册"按钮
4. **预期**: 
   - 标题变为"注册"
   - 显示邮箱输入框
   - 按钮文字变为"注册"
   - 底部文字变为"已有账户？立即登录"
5. **操作**: 点击"立即登录"
6. **预期**: 回到登录界面，邮箱字段隐藏

### ✅ **测试2: 表单验证**

#### 2.1 登录模式验证
1. **操作**: 在登录模式下，点击"登录"按钮（不输入任何内容）
2. **预期**: 显示"请输入用户名"和"请输入密码"错误提示

#### 2.2 注册模式验证
1. **操作**: 切换到注册模式，点击"注册"按钮（不输入任何内容）
2. **预期**: 显示所有字段的验证错误
3. **操作**: 输入无效邮箱格式（如"test@"）
4. **预期**: 显示"请输入有效的邮箱地址"
5. **操作**: 输入短密码（少于8个字符）
6. **预期**: 显示"密码至少需要8个字符"

### ✅ **测试3: 成功注册流程**
1. **操作**: 切换到注册模式
2. **操作**: 填写有效信息：
   - 用户名: `testuser`
   - 邮箱: `testuser@demo.com`
   - 密码: `TestPass123!`
3. **操作**: 点击"注册"按钮
4. **预期**: 
   - 显示加载动画
   - 成功后显示绿色提示"注册成功！请登录"
   - 自动切换到登录模式
   - 表单字段被清空

### ✅ **测试4: 注册后登录**
1. **前提**: 已完成测试3的注册
2. **操作**: 在登录界面输入刚注册的凭据
3. **预期**: 成功登录并跳转到主界面

### ✅ **测试5: 错误处理**

#### 5.1 重复邮箱注册
1. **操作**: 尝试用已存在的邮箱注册（如`admin@demo.com`）
2. **预期**: 显示红色错误提示

#### 5.2 网络错误处理
1. **操作**: 断开网络连接后尝试注册
2. **预期**: 显示网络错误提示

## 🎯 验收标准

### ✅ **功能完整性**
- [ ] 登录/注册模式切换正常
- [ ] 所有表单字段显示和隐藏正确
- [ ] 表单验证规则生效
- [ ] 成功注册后提示正确
- [ ] 自动模式切换工作
- [ ] 表单清空功能正常

### ✅ **用户体验**
- [ ] 界面切换流畅无闪烁
- [ ] 加载状态显示清晰
- [ ] 错误提示友好易懂
- [ ] 成功提示颜色区分明显
- [ ] 输入框图标显示正确

### ✅ **后端集成**
- [ ] 注册API调用成功
- [ ] 请求格式匹配后端期望
- [ ] 错误响应正确处理
- [ ] 日志信息完整记录

## 🐛 常见问题排查

### **问题1: 注册按钮无响应**
- 检查网络连接
- 查看控制台错误信息
- 确认后端API是否正常运行

### **问题2: 表单验证不生效**
- 确认_formKey.currentState?.validate()调用
- 检查validator函数返回值

### **问题3: 界面切换异常**
- 确认setState()调用
- 检查_isLoginMode状态管理

## 📱 设备测试建议

### **推荐测试设备**
- Android模拟器（API 30+）
- iOS模拟器（iOS 14+）
- Chrome浏览器（Web版本）

### **分辨率测试**
- 手机竖屏（375x667）
- 平板横屏（1024x768）
- 不同DPI设置

## 📊 测试报告模板

```
测试日期: [日期]
测试环境: [设备/模拟器信息]
Flutter版本: [版本号]

功能测试结果:
✅ UI界面切换
✅ 表单验证
✅ 成功注册流程  
✅ 注册后登录
✅ 错误处理

发现问题:
[ ] 问题描述
[ ] 复现步骤
[ ] 预期vs实际结果

总体评价: [通过/需修复]
```

---

*测试指南版本: v1.0*
*创建时间: 2025-09-23*