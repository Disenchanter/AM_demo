# Flutter é¡¹ç›®æ¶æ„è¯´æ˜

## ğŸ“ **lib/ æ–‡ä»¶å¤¹ç»“æ„ä¸èŒè´£**

```
lib/
â”œâ”€â”€ main.dart                 # ğŸš€ åº”ç”¨å…¥å£ç‚¹
â”œâ”€â”€ models/                   # ğŸ“Š æ•°æ®æ¨¡å‹å±‚
â”œâ”€â”€ services/                 # ğŸ”— ä¸šåŠ¡é€»è¾‘ä¸é€šä¿¡å±‚
â”œâ”€â”€ providers/               # ğŸ§  çŠ¶æ€ç®¡ç†å±‚
â”œâ”€â”€ screens/                 # ğŸ“± é¡µé¢/å±å¹•å±‚
â””â”€â”€ widgets/                 # ğŸ§© å¯å¤ç”¨UIç»„ä»¶å±‚
```

---

## ğŸ—ï¸ **è¯¦ç»†æ¶æ„è¯´æ˜**

### 1. **ğŸ“Š models/ - æ•°æ®æ¨¡å‹å±‚**
> **èŒè´£**: å®šä¹‰æ•°æ®ç»“æ„å’Œæ•°æ®è½¬æ¢é€»è¾‘

```dart
models/
â”œâ”€â”€ device.dart              # è®¾å¤‡æ•°æ®æ¨¡å‹
â”œâ”€â”€ preset.dart              # é¢„è®¾æ•°æ®æ¨¡å‹  
â”œâ”€â”€ user.dart                # ç”¨æˆ·æ•°æ®æ¨¡å‹
â””â”€â”€ models.dart              # ç»Ÿä¸€å¯¼å‡ºæ–‡ä»¶
```

**åŠŸèƒ½ç‰¹ç‚¹**:
- âœ… **æ•°æ®ç»“æ„å®šä¹‰**: Device, Preset, User, EQSettings
- âœ… **JSONåºåˆ—åŒ–**: toJson() / fromJson()
- âœ… **å‰åç«¯è½¬æ¢**: toBackend() / fromBackend()
- âœ… **æ•°æ®éªŒè¯**: å­—æ®µæ ¡éªŒå’Œé»˜è®¤å€¼
- âœ… **ä¸šåŠ¡é€»è¾‘**: copyWith(), ä¾¿åˆ©æ–¹æ³•ç­‰

---

### 2. **ğŸ”— services/ - ä¸šåŠ¡é€»è¾‘ä¸é€šä¿¡å±‚**
> **èŒè´£**: å¤„ç†æ•°æ®æŒä¹…åŒ–ã€ç½‘ç»œé€šä¿¡å’Œä¸šåŠ¡é€»è¾‘

```dart
services/
â”œâ”€â”€ api_service.dart         # HTTP APIé€šä¿¡æœåŠ¡
â”œâ”€â”€ auth_service.dart        # èº«ä»½è®¤è¯æœåŠ¡
â”œâ”€â”€ device_service.dart      # è®¾å¤‡ç®¡ç†æœåŠ¡
â””â”€â”€ preset_service.dart      # é¢„è®¾ç®¡ç†æœåŠ¡
```

**åŠŸèƒ½ç‰¹ç‚¹**:
- ğŸŒ **ç½‘ç»œé€šä¿¡**: REST APIè°ƒç”¨ (ApiService)
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–**: æœ¬åœ°å­˜å‚¨ (SharedPreferences)
- ğŸ” **èº«ä»½è®¤è¯**: ç™»å½•/æ³¨å†Œ/Tokenç®¡ç†
- ğŸ”„ **æ•°æ®åŒæ­¥**: æœ¬åœ°ç¼“å­˜ + äº‘ç«¯åŒæ­¥
- ğŸ“¡ **ä¸šåŠ¡é€»è¾‘**: è®¾å¤‡æ§åˆ¶ã€é¢„è®¾åº”ç”¨ç­‰

---

### 3. **ğŸ§  providers/ - çŠ¶æ€ç®¡ç†å±‚**
> **èŒè´£**: ç®¡ç†åº”ç”¨çŠ¶æ€ï¼Œè¿æ¥UIå’ŒæœåŠ¡å±‚

```dart
providers/
â”œâ”€â”€ auth_provider.dart       # è®¤è¯çŠ¶æ€ç®¡ç†
â”œâ”€â”€ device_provider.dart     # è®¾å¤‡çŠ¶æ€ç®¡ç†
â””â”€â”€ preset_provider.dart     # é¢„è®¾çŠ¶æ€ç®¡ç†
```

**åŠŸèƒ½ç‰¹ç‚¹**:
- ğŸ“Š **çŠ¶æ€ç®¡ç†**: ä½¿ç”¨Provideræ¨¡å¼
- ğŸ”„ **æ•°æ®æµæ§åˆ¶**: è¿æ¥æœåŠ¡å±‚å’ŒUIå±‚
- ğŸ“¢ **å˜æ›´é€šçŸ¥**: notifyListeners()
- ğŸ¯ **UIå“åº”**: Consumer/Selectoræ›´æ–°UI
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: é¿å…ä¸å¿…è¦çš„é‡å»º

---

### 4. **ğŸ“± screens/ - é¡µé¢/å±å¹•å±‚**
> **èŒè´£**: å®Œæ•´çš„é¡µé¢å®ç°ï¼Œç»„åˆå„ç§ç»„ä»¶

```dart
screens/
â”œâ”€â”€ home_screen.dart         # ğŸ  ä¸»é¡µé¢
â”œâ”€â”€ device_control_screen.dart # ğŸ›ï¸ è®¾å¤‡æ§åˆ¶é¡µé¢
â”œâ”€â”€ preset_screen.dart       # ğŸµ é¢„è®¾ç®¡ç†é¡µé¢
â””â”€â”€ login_screen.dart        # ğŸ” ç™»å½•é¡µé¢
```

**åŠŸèƒ½ç‰¹ç‚¹**:
- ğŸ“± **å®Œæ•´é¡µé¢**: Scaffold + AppBar + Body
- ğŸ¨ **é¡µé¢å¸ƒå±€**: ç»„ç»‡å’Œæ’åˆ—UIç»„ä»¶
- ğŸ”„ **çŠ¶æ€æ¶ˆè´¹**: Consumer<Provider>
- ğŸ§­ **å¯¼èˆªé€»è¾‘**: é¡µé¢è·³è½¬å’Œå‚æ•°ä¼ é€’
- ğŸ’¬ **ç”¨æˆ·äº¤äº’**: å¯¹è¯æ¡†ã€æç¤ºä¿¡æ¯ç­‰

---

### 5. **ğŸ§© widgets/ - å¯å¤ç”¨UIç»„ä»¶å±‚**
> **èŒè´£**: å°è£…å¯å¤ç”¨çš„UIç»„ä»¶

```dart
widgets/
â”œâ”€â”€ volume_slider.dart       # ğŸ”Š éŸ³é‡æ»‘å—ç»„ä»¶
â”œâ”€â”€ eq_slider.dart           # ğŸ›ï¸ EQè°ƒèŠ‚ç»„ä»¶
â””â”€â”€ preset_selector.dart     # ğŸµ é¢„è®¾é€‰æ‹©å™¨ç»„ä»¶
```

**åŠŸèƒ½ç‰¹ç‚¹**:
- ğŸ”„ **å¯å¤ç”¨**: åœ¨å¤šä¸ªé¡µé¢ä¸­ä½¿ç”¨
- ğŸ¨ **UIå°è£…**: ä¸“é—¨çš„UIé€»è¾‘å’Œæ ·å¼
- ğŸ“Š **æ•°æ®ç»‘å®š**: æ¥æ”¶å‚æ•°å’Œå›è°ƒ
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: StatelessWidgetä¼˜å…ˆ
- ğŸ¯ **å•ä¸€èŒè´£**: æ¯ä¸ªç»„ä»¶ä¸“æ³¨ä¸€ä¸ªåŠŸèƒ½

---

## ğŸ”„ **æ•°æ®æµæ¶æ„**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ç”¨æˆ·æ“ä½œ    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Screens   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚  Providers  â”‚
â”‚   (UIå±‚)    â”‚               â”‚  (çŠ¶æ€å±‚)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                             â”‚
       â”‚ çŠ¶æ€æ›´æ–°                     â”‚ ä¸šåŠ¡è°ƒç”¨
       â”‚                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Widgets   â”‚               â”‚  Services   â”‚
â”‚  (ç»„ä»¶å±‚)   â”‚               â”‚  (æœåŠ¡å±‚)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                               æ•°æ®äº¤æ¢ â”‚
                                      â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   Models    â”‚
                              â”‚  (æ•°æ®å±‚)   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ **å„å±‚äº¤äº’è§„åˆ™**

### âœ… **å…è®¸çš„ä¾èµ–å…³ç³»**:
- `Screens` â†’ `Providers` â†’ `Services` â†’ `Models`
- `Widgets` â†’ `Providers` â†’ `Services` â†’ `Models`
- `Services` â†” `Services` (ç›¸äº’è°ƒç”¨)

### âŒ **ç¦æ­¢çš„ä¾èµ–å…³ç³»**:
- `Models` â†’ ä»»ä½•å…¶ä»–å±‚
- `Services` â†’ `Providers`
- `Services` â†’ `UIå±‚`

---

## ğŸ“‹ **æ–‡ä»¶å‘½åè§„èŒƒ**

| ç±»å‹ | å‘½åæ ¼å¼ | ç¤ºä¾‹ |
|------|----------|------|
| **Screen** | `*_screen.dart` | `device_control_screen.dart` |
| **Widget** | `*_widget.dart` æˆ–æè¿°æ€§åç§° | `volume_slider.dart` |
| **Provider** | `*_provider.dart` | `device_provider.dart` |
| **Service** | `*_service.dart` | `api_service.dart` |
| **Model** | æè¿°æ€§åç§° | `device.dart`, `preset.dart` |

---

## ğŸš€ **æ‰©å±•æŒ‡å—**

### æ·»åŠ æ–°åŠŸèƒ½æ—¶çš„æ­¥éª¤:
1. **ğŸ“Š Model**: å…ˆå®šä¹‰æ•°æ®ç»“æ„
2. **ğŸ”— Service**: å®ç°ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®æ“ä½œ  
3. **ğŸ§  Provider**: ç®¡ç†çŠ¶æ€å˜åŒ–
4. **ğŸ§© Widget**: åˆ›å»ºä¸“ç”¨UIç»„ä»¶
5. **ğŸ“± Screen**: ç»„åˆæˆå®Œæ•´é¡µé¢

### æœ€ä½³å®è·µ:
- ğŸ¯ **å•ä¸€èŒè´£**: æ¯ä¸ªæ–‡ä»¶ä¸“æ³¨ä¸€ä¸ªåŠŸèƒ½
- ğŸ”„ **æ¾è€¦åˆ**: é€šè¿‡æ¥å£è€Œéå®ç°äº¤äº’
- âš¡ **æ€§èƒ½ä¼˜å…ˆ**: é¿å…ä¸å¿…è¦çš„é‡å»ºå’Œç½‘ç»œè°ƒç”¨
- ğŸ“ **å¯æµ‹è¯•**: é€»è¾‘ä¸UIåˆ†ç¦»ï¼Œä¾¿äºå•å…ƒæµ‹è¯•

è¿™ç§æ¶æ„ç¡®ä¿äº†ä»£ç çš„**å¯ç»´æŠ¤æ€§**ã€**å¯æ‰©å±•æ€§**å’Œ**å¯æµ‹è¯•æ€§**ï¼